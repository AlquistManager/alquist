name: greet_flow
states:
  greet:
    type: message_text
    properties:
      text: 'Dobrý den'

  greet_name:
    type: message_text_random # Sends one of the messages listed under responses
    properties:
      responses: # List of responses
        - Moje jméno je Primus.
        - Jmenuji se Primus.
        - Já jsem Primus.

  greet_explain:
    type: message_text_random # Sends one of the messages listed under responses
    properties:
      responses: # List of responses
        - 'Rád Vám pomohu s výbìrem a nákupem takového mobilního telefonu, který splní všechny vaše požadavky.'
        - 'Pomohu Vám vybrat mobilní telefon pøesnì podle vašich požadavkù.'

  greet_ask:
    type: message_text_random # Sends one of the messages listed under responses
    properties:
      responses: # List of responses
        - Mùžeme zaèít?
        - Jste pøipraveni zaèít?

  can_start_ask:
    type: input_user # Prompts cliends and waits for his response
    properties:
      entities: # List of entities expected in client's answer
        yes_no: yes_no # context key: entity
      require_match: true # determines if expected entities are required
    transitions:
      match: can_start # transition when the entities are matched
      notmatch: error_can_start # transition when the entities are not matched

  error_can_start:
    type: message_text_random # Sends one of the messages listed under responses
    properties:
      responses: # List of responses
        - Omlouvám se, ale nerozumìl jsem vám. Jste pøipraveni zaèít s výbìrem telefonu?
        - Promiòte, ale nerozumìl jsem, chcete pomoc s výbìrem telefonu?
    transitions:
      next_state: can_start_ask

  can_start:
    type: conditional_equal
    properties:
      value1: '{{yes_no}}' # Here we use value of a context key intent
      value2: 'yes' # We compare string "greeting"
    transitions: # defines transition states for both branches
      equal: greet_start # transition for when values are equal
      notequal: goodbye # transition for when values are not equal

  greet_start:
    type: message_text_random # Sends one of the messages listed under responses
    properties:
      responses: # List of responses
        - Výbornì
        - Skvìlì
        - Super
    transitions:
      flow: main_flow

  goodbye:
    type: message_text
    properties:
      text: 'Pokud zmìníte názor, prosím aktvujte mne klitkutím na panel v pravém dolním rohu obrazovky.'
